{"version":3,"sources":["books/BookList.js","common/Pagination.js","books/Books.js","App.js","index.js"],"names":["BooksList","_ref","items","react_default","a","createElement","className","ListGroup_default","length","map","item","index","Item","key","id","book_title","Alert_default","variant","withRouter","currentPage","history","totalPages","handlePageChange","e","preventDefault","newCurrentPage","parseInt","target","attributes","getNamedItem","value","push","concat","number","Math","min","react_bootstrap_Pagination","data-id","active","onClick","size","params","match","inputQuery","Object","objectWithoutProperties","useRef","_useState","useState","books","count","_useState2","slicedToArray","setBooks","_useState3","_useState4","query","setQuery","currentPageFromUrl","page","handleKeyDown","_ref2","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","keyCode","current","stop","_x","apply","this","arguments","handleFilter","_ref3","_callee2","_context2","_x2","fetchBooks","_ref5","_callee3","_ref4","_ref4$itemsPerPage","itemsPerPage","filters","response","_context3","type","values","fetch","method","headers","Content-Type","body","JSON","stringify","objectSpread","sent","t0","json","t1","_x3","useEffect","_fetchData","_callee4","_context4","fetchData","InputGroup_default","FormControl_default","ref","placeholder","aria-label","aria-describedby","onKeyDown","autoFocus","Button_default","BookList","common_Pagination","App","react_router_dom","react_router","path","component","Books","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.ce8a7c02.chunk.js","sourcesContent":["import React from \"react\";\nimport Alert from \"react-bootstrap/Alert\";\nimport ListGroup from \"react-bootstrap/ListGroup\";\n\nconst BooksList = ({ items }) => {\n  return (\n    <div className=\"BooksList\">\n      <ListGroup>\n        {items && items.length ? (\n          items.map((item, index) => (\n            <ListGroup.Item\n              key={item.id}\n              className={index % 2 ? \"BooksList__Item--Alternate\" : \"\"}\n            >\n              <em className=\"BooksList__Item__Id\">{item.id}</em>{\" \"}\n              <span className=\"BooksList__Item__Title\">{item.book_title}</span>\n            </ListGroup.Item>\n          ))\n        ) : (\n          <Alert variant=\"primary\">No books found</Alert>\n        )}\n      </ListGroup>\n    </div>\n  );\n};\n\nexport default BooksList;\n","import React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport * as BootstrapPagination from \"react-bootstrap/Pagination\";\n\nconst PAGINATION_RANGE = 5;\n\nconst Pagination = ({ currentPage, history, totalPages }) => {\n  const handlePageChange = e => {\n    e.preventDefault();\n\n    const newCurrentPage = parseInt(\n      e.target.attributes.getNamedItem(\"data-id\").value\n    );\n    history.push(`/${newCurrentPage}`);\n  };\n\n  let items = [];\n  for (\n    let number =\n      currentPage <= PAGINATION_RANGE ? 1 : currentPage - PAGINATION_RANGE;\n    number <= Math.min(currentPage + PAGINATION_RANGE, totalPages);\n    number++\n  ) {\n    items.push(\n      <BootstrapPagination.Item\n        key={number}\n        data-id={number}\n        active={number === currentPage}\n        onClick={handlePageChange}\n      >\n        {number}\n      </BootstrapPagination.Item>\n    );\n  }\n\n  return (\n    <div className=\"Pagination\">\n      <BootstrapPagination size=\"md\">{items}</BootstrapPagination>\n    </div>\n  );\n};\n\nexport default withRouter(Pagination);\n","import React, { useEffect, useRef, useState } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport Button from \"react-bootstrap/Button\";\nimport FormControl from \"react-bootstrap/FormControl\";\nimport InputGroup from \"react-bootstrap/InputGroup\";\nimport BooksList from \"./BookList\";\nimport Pagination from \"../common/Pagination\";\n\nconst BOOKS_API_ENDPOINT = \"http://nyx.vima.ekt.gr:3000/api/books\";\nconst BOOKS_PER_PAGE = 5;\n\nconst Books = ({ history, match: { params }, ...props }) => {\n  const inputQuery = useRef(null);\n  const [books, setBooks] = useState({ books: [], count: 0 });\n  const [query, setQuery] = useState(\"\");\n  const currentPageFromUrl = parseInt(params.page) || 1;\n\n  const handleKeyDown = async e => {\n    if (e.keyCode === 13) {\n      setQuery(inputQuery.current.value);\n      history.push(`/1`);\n    }\n  };\n\n  const handleFilter = async e => {\n    e.preventDefault();\n\n    setQuery(inputQuery.current.value);\n    history.push(`/1`);\n  };\n\n  const fetchBooks = async ({ page, itemsPerPage = BOOKS_PER_PAGE }) => {\n    const filters = { filters: [{ type: \"all\", values: [query] }] };\n    const response = await fetch(BOOKS_API_ENDPOINT, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        page,\n        itemsPerPage,\n        ...filters\n      })\n    });\n\n    setBooks(await response.json());\n  };\n\n  useEffect(() => {\n    async function fetchData() {\n      await fetchBooks({ page: currentPageFromUrl });\n    }\n\n    fetchData();\n  }, [query, params]);\n\n  return (\n    <div className=\"Books\">\n      <InputGroup className=\"mb-3\">\n        <FormControl\n          ref={inputQuery}\n          placeholder=\"Enter your query...\"\n          aria-label=\"Filter query\"\n          aria-describedby=\"basic-addon1\"\n          onKeyDown={handleKeyDown}\n          autoFocus\n        />\n      </InputGroup>\n      <Button variant=\"primary\" onClick={handleFilter}>\n        Filter\n      </Button>\n      <BooksList items={books.books} />\n      <Pagination\n        currentPage={currentPageFromUrl}\n        totalPages={books.count / BOOKS_PER_PAGE}\n      />\n    </div>\n  );\n};\n\nexport default withRouter(Books);\n","import React from \"react\";\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\nimport { Books } from \"./books\";\nimport \"./bootstrap-custom.scss\"; // override Bootstrap theme here\nimport \"./App.scss\";\n\nfunction App() {\n  return (\n    <Router>\n      <div className=\"App\">\n        <h3 className=\"App__Header\">Lukasz Wolnik's Greek book search</h3>\n        <Switch>\n          <Route path={\"/:page?\"} component={Books} />\n        </Switch>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}